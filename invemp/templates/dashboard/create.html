{% extends "base.html" %}

{% block header %}
<h1>{% block title%}Create Entry in {{ table_name }} 
  {% if table_name == 'subcategories' %} for {{ category[1] }} {% endif %}{% endblock%}</h1>
{% endblock %}

{% block content %}
<div class="form-compact create-bg">
  <form method="post" class="form-compact-form">
    {% for column in columns %}
      {% if not (column.endswith('_id')) and column not in ['id', 'last_updated', 'item_name'] %}
      <div class="form-row">
        <label for="{{ column }}" class="form-label">{{ column.replace('_', ' ').title() }}{% if not_null_columns and not_null_columns.get(column) %}<span class="required-asterisk">*</span>{% endif %}</label>
        {% if column == 'Assigned To' %}
          <input type="text" class="form-input" id="Assigned-To" name="Assigned To" list="assigned-to-list" >
          <datalist id="assigned-to-list">
            {% for option in dropdown_options[column] %}
            <option value="{{ option }}">{{ option }}</option>
            {% endfor %}
          </datalist>
          <button type="button" class="btn btn-secondary btn-clear" onclick="document.getElementById('Assigned-To').value = '';">Clear</button>
        {% elif column in dropdown_options and table_name != 'subcategories' %}
          <select class="form-input" id="{{ column }}" name="{{ column }}">
            {% for option in dropdown_options[column] %}
            <option value="{{ option }}">{{ option }}</option>
            {% endfor %}
          </select>
        {% elif column == 'category' and table_name in ['items', 'subcategories'] %}
          <input type="text" class="form-input readonly" id="{{ column }}" name="{{ column }}" value="{{ category[1] }}" readonly>
        {% else %}
          <input type="text" class="form-input" id="{{ column }}" name="{{ column }}">
        {% endif %}
      </div>
      {% endif %}
    {% endfor %}
    <button type="submit" class="btn btn-primary btn-compact">Submit</button>
  </form>
</div>
{% endblock %}