{% extends 'base.html' %}

{% block title %}
  {% if table_name == 'items' %}
    Item Details
  {% elif table_name == 'employees' %}
    Employee Details
  {% endif %}
{% endblock %}

{% block content %}
<div class="details-container">
    <!-- Back button and title header -->
    <div class="details-header">
    <h1 class="details-title">
        {% if table_name == 'items' %}
        Item #{{ entry[0] }} Details
        {% elif table_name == 'employees' %}
        Employee {{ entry[3] }}, {{ entry[2] }} Details
        {% endif %}
    </h1>
    {% if table_name == 'items' %}
    <a href="{{ url_for('dashboard_admin.duplicate', table_name=table_name, id=id) }}" class="icon-btn duplicate-btn" title="Duplicate this item">
      <span class="icon-btn-svg">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10" stroke="#6366f1" stroke-width="2" fill="#f3f4f6"/>
          <line x1="12" y1="8" x2="12" y2="16" stroke="#6366f1" stroke-width="2" stroke-linecap="round"/>
          <line x1="8" y1="12" x2="16" y2="12" stroke="#6366f1" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </span>
      <span class="icon-btn-text">Duplicate</span>
    </a>
    {% endif %}
    </div>

    <!-- Details card -->
    <div class="details-card">
    <div class="details-grid">
    {% for column in columns %}
        <div class="detail-item">
            <span class="detail-label">{{ column }}</span>
            {% if column == 'subcategory' %}
              <span class="detail-value">{{ entry[-2] }}</span>
            {% elif column == 'Assigned To' %}
              <span class="detail-value">{{ entry[-1] }}</span>
            {% elif column == 'user_account' %}
              <span class="detail-value">{{ entry[-1] }}</span>
            {% else %}
              <span class="detail-value">{{ entry[loop.index0] }}</span>
            {% endif %}
        </div>
    {% endfor %}
    </div> <!-- end of details-grid -->

    </div> <!-- end of details-card -->
    <div class="details-actions">
        <a href="{{ url_for('dashboard_admin.update', table_name=table_name, id=id) }}" class="edit-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg>
        {% if table_name == 'items' %}
        Edit Item
        {% elif table_name == 'employees' %}
        Edit Employee
        {% endif %}
        </a>
    </div>
    {% if table_name == 'employees' %}
    <div class="liabilities-card">
      <h2>Liabilities</h2>
      <a href="{{ url_for('dashboard_admin.add_liabilities', table_name=table_name, id=entry[0]) }}">
        Add Liabilities
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg>
      </a>
    {% endif %}
      {% if liabilities %}
      <table class="liabilities-table">
        <thead>
          <tr>
            <th>Item ID</th>
            <th>Item Name</th>
            <th>Subcategory</th>
            <th>Specification</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for item in liabilities %}
          <tr style="cursor: pointer;" onclick="window.location='{{ url_for('dashboard_user.view_details', table_name='items', id=item[0]) }}'">
            <td>{{ item[0] }}</td>
            <td>{{ item[1] }}</td>
            <td>{{ item[2] }}</td>
            <td>{{ item[3] }}</td>
            <td style="text-align:center;" onclick="event.stopPropagation();">
              <form method="post" action="{{ url_for('dashboard_admin.remove_liability', employee_id=entry[0], item_id=item[0]) }}" style="display:inline;">
                <button type="submit" class="remove-liability-btn" title="Remove Liability">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="#991b1b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><line x1="4" y1="4" x2="14" y2="14"/><line x1="14" y1="4" x2="4" y2="14"/></svg>
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif %}

<style>
.icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: 1.5px solid #6366f1;
  color: #6366f1;
  padding: 0.35rem 1.1rem 0.35rem 0.6rem;
  margin-left: 0.5rem;
  border-radius: 2rem;
  font-weight: 600;
  font-size: 1rem;
  gap: 0.5rem;
  box-shadow: 0 2px 8px rgba(99,102,241,0.10);
  cursor: pointer;
  transition: background 0.18s, box-shadow 0.18s, transform 0.1s, color 0.18s;
  text-decoration: none;
}
.icon-btn .icon-btn-svg {
  display: flex;
  align-items: center;
  margin-right: 0.3rem;
}
.icon-btn .icon-btn-text {
  display: inline-block;
  font-size: 1rem;
  color: #3730a3;
}
.icon-btn.duplicate-btn:hover, .icon-btn.duplicate-btn:focus {
  background: #6366f1;
  color: #fff;
  box-shadow: 0 4px 16px rgba(99,102,241,0.18);
  transform: scale(1.06);
}
.icon-btn.duplicate-btn:hover .icon-btn-text {
  color: #fff;
}
.icon-btn.duplicate-btn:hover svg circle {
  fill: #000000;
  stroke: #000000;
}
.icon-btn.duplicate-btn:hover svg line {
  stroke: #fff;
}

.details-container {
  max-width: 1200px;
  margin: 2rem auto;
  padding: 0 1rem;
}

.details-header {
  display: flex;
  align-items: center;
  margin-bottom: 2rem;
  gap: 1rem;
}

.back-button {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  color: #666;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  transition: background-color 0.2s;
  background-color: #f5f5f5;
}

.back-button:hover {
  background-color: #e5e5e5;
  color: #333;
}

.details-title {
  font-size: 1.5rem;
  color: #333;
  margin: 0;
}

.details-card {
  background: white;
  border-radius: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  padding: 2rem;
}

.details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
}

.detail-item {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.full-width {
  grid-column: 1 / -1;
}

.detail-label {
  font-size: 0.875rem;
  color: #666;
  font-weight: 500;
  text-transform: uppercase;
}

.detail-value {
  font-size: 1rem;
  color: #333;
}

.status-badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  text-transform: capitalize;
}

.status-active {
  background-color: #dcfce7;
  color: #166534;
}

.status-inactive {
  background-color: #fee2e2;
  color: #991b1b;
}

.status-maintenance {
  background-color: #fef9c3;
  color: #854d0e;
}

.details-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 2rem;
}
.edit-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background-color: #9f83ec;
  color: #000000;
  font-weight: 600;
  padding: 0.75rem 1.5rem;
  border-radius: 0.75rem;
  text-decoration: none;
  box-shadow: 0 2px 8px rgba(99,102,241,0.08);
  transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
  font-size: 1rem;
}
.edit-btn .icon {
  margin-right: 0.5rem;
}
.edit-btn:hover {
  background: linear-gradient(90deg, #60a5fa 0%, #6366f1 100%);
  color: #000000;
  box-shadow: 0 4px 16px rgba(99,102,241,0.15);
  transform: translateY(-2px) scale(1.03);
}

.liabilities-card {
  margin-top: 2.5rem;
  background: #fff;
  border-radius: 1rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.07);
  padding: 2rem;
}
.liabilities-card h2 {
  font-size: 1.2rem;
  color: #2e2e52;
  margin-bottom: 1.2rem;
}
.liabilities-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 1rem;
}
.liabilities-table th, .liabilities-table td {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid #e5e7eb;
  text-align: left;
}
.liabilities-table th {
  background: #f3f4f6;
  color: #22223b;
  font-weight: 600;
}
.liabilities-table tr:last-child td {
  border-bottom: none;
}
.remove-liability-btn {
  background: none;
  border: none;
  padding: 0.25rem;
  cursor: pointer;
  transition: background 0.15s;
  border-radius: 50%;
}
.remove-liability-btn:hover {
  background: #fee2e2;
}

@media (max-width: 768px) {
  .details-container {
    margin: 1rem auto;
  }
  
  .details-card {
    padding: 1rem;
  }
  
  .details-grid {
    gap: 1rem;
  }
}
</style>
{% endblock %}