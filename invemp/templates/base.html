<!doctype html>
<link rel="icon" href="{{ url_for('static', filename='icons/favicon/favicon.ico') }}">
<title>{% block title %}{% endblock %} - Inventory</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
{% if g.user %}
<nav>
  <ul>
      <li id="current-user"><span>{{ g.user[1] }}</span>
      <li><a href="{{ url_for('auth.logout') }}" class="btn-53">
        <div class="original">Log Out</div>
        <div class="letters">
          <span>B</span>
          <span>Y</span>
          <span>E</span>
          <span>?</span>
        </div>
      </a>
  </ul>
  {% if g.user[3] == 'admin'%}
  <ul class="tables-nav">
      {% if table_name == 'user_accounts' and g.user[3] == 'admin' %}
      <a href = "{{ url_for ('auth.register') }}" class="btn btn-create">Create User</a>
      {% elif g.user[3] == 'admin' %}
      <a href = "{{ url_for ('dashboard.create', table_name = table_name) }}" class="btn btn-create">Create Entry</a>
      {% endif %}
    {% for table in tables %}
    <li class="nav-item">
      {% if table == table_name %}
      <h1 class="tables" id="current-table">{{ table_name }}</h1>
      {% else %}
      <a href="{{ url_for('dashboard.index', table_name=table) }}" class="tables" id="table-link">{{ table }}</a>
      {% endif %}
    </li>
    {% endfor %}
  </ul>
  {% endif %}
</nav>
{% endif %}
<section class="content">
  <header>
    {% block header %}{% endblock %}
  </header>
  {% for message in get_flashed_messages() %}
  <div class="flash" data-flash>{{ message }}</div>
  {% endfor %}
  {% block content %}{% endblock %}
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const flashMessages = document.querySelectorAll('[data-flash]');
    
    flashMessages.forEach(message => {
      // Remove after 5 seconds (5000ms)
      setTimeout(() => {
        message.style.opacity = '0';
        setTimeout(() => message.remove(), 500); // Match this with CSS transition
      }, 5000);
    });
  });
  </script>